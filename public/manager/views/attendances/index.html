<div class="ui one column padding grid" ng-init="initial()"> <div class="row"> <div class="column"> <div class="ui piled segment"> <div class="ui inverted dimmer orders"> <div class="ui large loader"></div> </div> <form class="floated right filters" ng-submit="searchData()"> <div class="ui form entry-form"> <div class="field"> <dropdown title="Select outlet" ng-model="$root.filter.outlet_id" open name="outlet" ng-if="$root.user.role !== 'tenant'"> <dropdown-group title="all_outlets" value="null">All Outlets</dropdown-group> <dropdown-group title="o.name" value="o.id" ng-repeat="o in outlets">{{o.name}}</dropdown-group> </dropdown> <dropdown title="Select tenant" ng-model="$root.filter.tenant_id" open name="tenant" ng-if="$root.user.role !== 'tenant'"> <dropdown-group title="all_tenants" value="null">All Tenants</dropdown-group> <dropdown-group title="t.name" value="t.id" ng-repeat="t in tenants">{{t.name}}</dropdown-group> </dropdown> <input class="data" ng-model="$root.filter.data" type="text" placeholder="filter by tenant name"> <input class="pikaday" ng-model="$root.filter.dateStart" type="text" placeholder="filter by date start" required ng-if="$root.filter.tenant_id"> <input class="pikaday" ng-model="$root.filter.dateEnd" type="text" placeholder="filter by date end" required ng-if="$root.filter.tenant_id"> <input class="pikaday" ng-model="$root.filter.date" type="text" placeholder="filter by date" required ng-if="!$root.filter.tenant_id"> <!-- <dropdown title="size" ng-model="$root.filter.page_size" open="false" name="page_size" class="page">
                <dropdown-group title="o" value="o" ng-repeat="o in [10, 20, 50, 100, 'all']">{{o}}</dropdown-group>
              </dropdown> --> <input type="submit" class="ui button blue" value="Filter"> <button ng-if="!$root.filter.tenant_id" ng-click="exportToExcel('#attendances-table')" class="ui button blue">Export</button> </div> </div> </form> <div style="height: 400px; padding: 10px" ng-if="$root.filter.tenant_id"> <nvd3-line-chart yaxistickpadding="yPadding" data="attendances_plot" showxaxis="true" showyaxis="true" tooltips="true" xaxistickformat="xFormat" yaxislabel="Time" yaxistickformat="yFormat" x="xFunction()" y="yFunction()" forcey="initial_date" interactive="true"> </nvd3-line-chart> </div> <table class="ui compact celled table form" id="attendances-table"> <thead> <tr> <th>Date <th>Tenant Name <th>Come In <th>Come Out <th>Duration <!-- <th>Action</th> -->   <tbody> <tr ng-repeat="att in attendances"> <td>{{att.date | getdate}} <td>{{att.name}} <td ng-class="{'bg-red': tooLate(att.come_in)}">{{att.come_in | gettime}} <td ng-class="{'bg-red': tooFast(att.come_out)}">{{att.come_out | gettime}} <td>{{att.duration.substr(0, att.duration.indexOf('.'))}} <!--      <td>
                <div class="ui button small white" ng-click="viewData(order)">View</div>
              </td> -->   </table> </div> </div> </div> </div>